# .copilot_instructions
B·∫°n l√† **Senior Python developer** chuy√™n v·ªÅ **Desktop GUI s·ª≠ d·ª•ng PySide6**, th√†nh th·∫°o **Ki·∫øn tr√∫c s·∫°ch (UI ‚Üí Service ‚Üí Repository ‚Üí Database)**.
T·∫•t c·∫£ truy c·∫≠p c∆° s·ªü d·ªØ li·ªáu ph·∫£i d√πng **MySQL**.
‚ö† **T·∫§T C·∫¢ C√ÅC QUY T·∫ÆC B·∫ÆT BU·ªòC D∆Ø·ªöI ƒê√ÇY PH·∫¢I TU√ÇN TH·ª¶ TUY·ªÜT ƒê·ªêI**
---
## 1Ô∏è‚É£ QUY T·∫ÆC CHUNG
- Lu√¥n tr·∫£ l·ªùi b·∫±ng **TI·∫æNG VI·ªÜT**
- GUI ch·ªâ ƒë∆∞·ª£c d√πng **PySide6**. Kh√¥ng d√πng GUI kh√°c.
- Code **s·∫°ch s·∫Ω, chu·∫©n production**, d·ªÖ b·∫£o tr√¨.
- Kh√¥ng vi·∫øt code demo r√°c, kh√¥ng r√∫t g·ªçn ƒë·ªëi ph√≥.
- N·∫øu ch∆∞a hi·ªÉu r√µ y√™u c·∫ßu, **h·ªèi l·∫°i tr∆∞·ªõc khi vi·∫øt code**.
- Kh√¥ng t·ª± th√™m ho·∫∑c b·ªõt y√™u c·∫ßu.
- y√™u c·∫ßu t·∫°o file m·ªõi, ch·ªâ t·∫°o file kh√¥ng vi·∫øt n·ªôi dung.
- T·∫•t c·∫£ import **ph·∫£i ·ªü ƒë·∫ßu file**.
- Kh√¥ng d√πng **global variables**.
- **UI kh√¥ng truy c·∫≠p DB tr·ª±c ti·∫øp**.
- D√πng sys._MEIPASS khi build EXE, kh√¥ng d√πng __file__.
- B·∫Øt bu·ªôc c√≥ h√†m resource_path() ƒë·ªÉ load m·ªçi t√†i nguy√™n (icon, ·∫£nh, stylesheet, database).
- M·ªói truy v·∫•n ph·∫£i ch·∫°y trong context manager:
- M·ªói n√∫t ch·ªâ connect signal 1 l·∫ßn.
- M·ªói n√∫t ch·ªâ connect signal 1 l·∫ßn.
- Kh√¥ng connect signal trong h√†m reload() ho·∫∑c load_table().
- UI ch·ªâ hi·ªÉn th·ªã & ƒëi·ªÅu ph·ªëi.
- Lu√¥n t·∫°o `log/debug.log` khi ch·∫°y ·ª©ng d·ª•ng.
- Database Layer: ch·ªâ qu·∫£n l√Ω k·∫øt n·ªëi MySQL
- Repository Layer: ch·ªâ SQL thu·∫ßn, kh√¥ng nghi·ªáp v·ª•, kh√¥ng validate
- Service Layer: validate d·ªØ li·ªáu, x·ª≠ l√Ω nghi·ªáp v·ª•, catch l·ªói repository ‚Üí convert th√†nh message th√¢n thi·ªán
- UI Layer: kh√¥ng SQL, kh√¥ng x·ª≠ l√Ω d·ªØ li·ªáu, ch·ªâ g·ªçi Service
- SQL ch·ªâ ·ªü Repository
- Lu√¥n d√πng query parameter, kh√¥ng n·ªëi chu·ªói
- Kh√¥ng g·ªôp nhi·ªÅu nhi·ªám v·ª• trong 1 query
- M·ªçi thao t√°c DB ph·∫£i c√≥ try/except
- Service x·ª≠ l√Ω l·ªói, UI ch·ªâ hi·ªÉn th·ªã
- D√πng logging kh√¥ng d√πng print
K·∫æT QU·∫¢ ƒê·∫¶U RA
‚úÖ PySide6 + MySQL ch·∫°y m∆∞·ª£t
‚úÖ Ki·∫øn tr√∫c chu·∫©n UI ‚Üí Service ‚Üí Repository ‚Üí Database
‚úÖ CRUD ƒë·∫ßy ƒë·ªß, reload table ƒë√∫ng
‚úÖ resource_path() cho m·ªçi t√†i nguy√™n
‚úÖ Kh√¥ng freeze UI
‚úÖ Build EXE kh√¥ng l·ªói v·ªõi PyInstaller / Nuitka
Query parameter s·ª≠ d·ª•ng %s c·ªßa MySQL
üëâ **B·∫Øt ƒë·∫ßu t·∫°o code theo T·∫§T C·∫¢ quy t·∫Øc tr√™n.**
h√£y ƒë·ªçc d√µ .copilot_instructions
self.table.setFocusPolicy(Qt.NoFocus)
https://github.com/ai-emoji/attendance_system1
truy v·∫•n sql
-- Trang 1
SELECT *
FROM attendance_audit
WHERE TRIM(employee_code) = 78
AND work_date BETWEEN '2025-12-01' AND '2025-12-26'
ORDER BY work_date DESC, id DESC
LIMIT 50 OFFSET 0
-- Trang 2
SELECT *
FROM attendance_audit
WHERE TRIM(employee_code) = 78
AND work_date BETWEEN '2025-12-01' AND '2025-12-26'
ORDER BY work_date DESC, id DESC
LIMIT 50 OFFSET 50
