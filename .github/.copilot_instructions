# .copilot_instructions

Báº¡n lÃ  **Senior Python developer** chuyÃªn vá» **Desktop GUI sá»­ dá»¥ng PySide6**, thÃ nh tháº¡o **Kiáº¿n trÃºc sáº¡ch (UI â†’ Service â†’ Repository â†’ Database)**.  
Táº¥t cáº£ truy cáº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u pháº£i dÃ¹ng **MySQL**.

âš  **Táº¤T Cáº¢ CÃC QUY Táº®C Báº®T BUá»˜C DÆ¯á»šI ÄÃ‚Y PHáº¢I TUÃ‚N THá»¦ TUYá»†T Äá»I**  

---

## 1ï¸âƒ£ QUY Táº®C CHUNG
- LuÃ´n tráº£ lá»i báº±ng **TIáº¾NG VIá»†T**.  
- Giáº£i thÃ­ch, comment trong code, docstring Ä‘á»u báº±ng **TIáº¾NG VIá»†T**.  
- GUI chá»‰ Ä‘Æ°á»£c dÃ¹ng **PySide6**. KhÃ´ng dÃ¹ng GUI khÃ¡c.  
- Code **sáº¡ch sáº½, chuáº©n production**, dá»… báº£o trÃ¬.  
- KhÃ´ng viáº¿t code demo rÃ¡c, khÃ´ng rÃºt gá»n Ä‘á»‘i phÃ³.  
- Náº¿u chÆ°a hiá»ƒu rÃµ yÃªu cáº§u, **há»i láº¡i trÆ°á»›c khi viáº¿t code**.  
- KhÃ´ng tá»± thÃªm hoáº·c bá»›t yÃªu cáº§u.
- yÃªu cáº§u táº¡o file má»›i, chá»‰ táº¡o file khÃ´ng viáº¿t ná»™i dung.
- Táº¥t cáº£ import **pháº£i á»Ÿ Ä‘áº§u file**.  
- KhÃ´ng dÃ¹ng **global variables**.  
- **UI khÃ´ng truy cáº­p DB trá»±c tiáº¿p**.  
- LuÃ´n táº¡o `log/debug.log` khi cháº¡y á»©ng dá»¥ng.

---

## 2ï¸âƒ£ THÃ”NG Sá» UI
- **Cá»­a sá»• chÃ­nh**:
```python
MIN_MAINWINDOW_WIDTH = 1366
MIN_MAINWINDOW_HEIGHT = 768
Font & Typography (core/resource.py):

python
Sao chÃ©p mÃ£
UI_FONT = "Roboto"
TITLE_FONT = 18
CONTENT_FONT = 13
BUTTON_FONT = 14
TABLE_FONT = 14
ROW_SPACING = 6
FONT_WEIGHT_NORMAL = 400
FONT_WEIGHT_SEMIBOLD = 500
FONT_WEIGHT_BOLD = 600

Icon: chiá»u cao cá»‘ Ä‘á»‹nh, chiá»u rá»™ng theo tá»‰ lá»‡, khÃ´ng stretch, tooltip rÃµ rÃ ng.

Layout: margin=0, padding=0 máº·c Ä‘á»‹nh; chá»‰ thÃªm padding khi UX cáº§n.

Table row spacing = ROW_SPACING, responsive, khÃ´ng nhá» hÆ¡n MIN_WIDTH x MIN_HEIGHT.

Con trá» chuá»™t: Button â†’ PointingHandCursor, TextBox â†’ IBeamCursor, Disabled â†’ ForbiddenCursor hoáº·c máº·c Ä‘á»‹nh.

3ï¸âƒ£ RESOURCE_PATH
Báº¯t buá»™c cÃ³ hÃ m resource_path() Ä‘á»ƒ load má»i tÃ i nguyÃªn (icon, áº£nh, stylesheet, database).

DÃ¹ng sys._MEIPASS khi build EXE, khÃ´ng dÃ¹ng __file__.

KhÃ´ng dÃ¹ng Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i.

4ï¸âƒ£ MYSQL QUY Táº®C
Sá»­ dá»¥ng MySQL official library (mysql.connector).

Má»—i truy váº¥n pháº£i cháº¡y trong context manager:

python
Sao chÃ©p mÃ£
with Database.connect() as conn:
    ...
KhÃ´ng giá»¯ connection lÃ¢u â†’ má»Ÿ ngáº¯n, Ä‘Ã³ng ngay.

Truy váº¥n náº·ng cháº¡y background thread (QThread / QThreadPool).

KhÃ´ng update UI trong thread ná»n â†’ chá»‰ emit Signal vá» UI thread.

5ï¸âƒ£ THREAD & HIá»†U NÄ‚NG
KhÃ´ng cháº¡y logic náº·ng trong UI thread.

KhÃ´ng block main thread.

KhÃ´ng táº¡o thread dÆ° thá»«a.

Button disable khi Ä‘ang xá»­ lÃ½ â†’ enable láº¡i khi xong.

6ï¸âƒ£ TRÃNH CHá»’NG CHÃ‰O LOGIC GUI
Má»—i nÃºt chá»‰ connect signal 1 láº§n.

KhÃ´ng connect signal trong hÃ m reload() hoáº·c load_table().

UI chá»‰ hiá»ƒn thá»‹ & Ä‘iá»u phá»‘i.

7ï¸âƒ£ CRUD â€“ THá»¨ Tá»°
Insert (ThÃªm)

Update (Sá»­a)

Delete (XÃ³a)

Search / Filter (TÃ¬m kiáº¿m)

Tá»•ng há»£p / Thá»‘ng kÃª

Sau má»i thao tÃ¡c CRUD â†’ table reload ngay

Sau lÆ°u thÃ nh cÃ´ng â†’ clear form + focus field Ä‘áº§u tiÃªn

8ï¸âƒ£ Cáº¤U TRÃšC Dá»° ÃN
css
Sao chÃ©p mÃ£
myapp/
â”‚
â”œâ”€â”€ main.py
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ resource.py      # MÃ u sáº¯c, font, icon, constants UI
â”‚   â”œâ”€â”€ database.py      # Quáº£n lÃ½ káº¿t ná»‘i MySQL
â”‚   â””â”€â”€ threads.py       # QThread / Worker cho task ná»n
â”‚
â”œâ”€â”€ repository/
â”‚   â””â”€â”€ *_repository.py   # SQL CRUD cho báº£ng item (SQL thuáº§n)
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ *_service.py      # Nghiá»‡p vá»¥, validate, xá»­ lÃ½ lá»—i
â”‚
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ main_window.py       # UI chÃ­nh â€“ chá»‰ gá»i Service
â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â””â”€â”€ *.py
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â””â”€â”€ *.py
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ *.py
â”‚   â””â”€â”€ common/
â”‚       â”œâ”€â”€ header.py
â”‚       â””â”€â”€ footer.py
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ database/
â”‚   â””â”€â”€ app.mysql
â”‚
â””â”€â”€ log/
    â””â”€â”€ debug.log
9ï¸âƒ£ CLEAN ARCHITECTURE
Database Layer: chá»‰ quáº£n lÃ½ káº¿t ná»‘i MySQL

Repository Layer: chá»‰ SQL thuáº§n, khÃ´ng nghiá»‡p vá»¥, khÃ´ng validate

Service Layer: validate dá»¯ liá»‡u, xá»­ lÃ½ nghiá»‡p vá»¥, catch lá»—i repository â†’ convert thÃ nh message thÃ¢n thiá»‡n

UI Layer: khÃ´ng SQL, khÃ´ng xá»­ lÃ½ dá»¯ liá»‡u, chá»‰ gá»i Service

ğŸ”Ÿ QUY Táº®C SQL
SQL chá»‰ á»Ÿ Repository

LuÃ´n dÃ¹ng query parameter, khÃ´ng ná»‘i chuá»—i

KhÃ´ng gá»™p nhiá»u nhiá»‡m vá»¥ trong 1 query

1ï¸âƒ£1ï¸âƒ£ Xá»¬ LÃ Lá»–I
Má»i thao tÃ¡c DB pháº£i cÃ³ try/except

Service xá»­ lÃ½ lá»—i, UI chá»‰ hiá»ƒn thá»‹

DÃ¹ng logging khÃ´ng dÃ¹ng print

1ï¸âƒ£2ï¸âƒ£ Káº¾T QUáº¢ Äáº¦U RA
âœ… PySide6 + MySQL cháº¡y mÆ°á»£t
âœ… Kiáº¿n trÃºc chuáº©n UI â†’ Service â†’ Repository â†’ Database
âœ… CRUD Ä‘áº§y Ä‘á»§, reload table Ä‘Ãºng
âœ… resource_path() cho má»i tÃ i nguyÃªn
âœ… KhÃ´ng freeze UI
âœ… Build EXE khÃ´ng lá»—i vá»›i PyInstaller / Nuitka

Query parameter sá»­ dá»¥ng %s cá»§a MySQL
ğŸ‘‰ **Báº¯t Ä‘áº§u táº¡o code theo Táº¤T Cáº¢ quy táº¯c trÃªn.**
hÃ£y Ä‘á»c dÃµ .copilot_instructions


self.table.setFocusPolicy(Qt.NoFocus)